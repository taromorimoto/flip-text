import{p as e,a as l,r as t,b as a,o as n,c as u,d as o,w as s,v as i,e as r,F as p,f as d,g as m,h}from"./vendor.a52c233c.js";!function(e=".",l="__import__"){try{self[l]=new Function("u","return import(u)")}catch(t){const a=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[l]=e=>new Promise(((t,u)=>{const o=new URL(e,a);if(self[l].moduleMap[o])return t(self[l].moduleMap[o]);const s=new Blob([`import * as m from '${o}';`,`${l}.moduleMap['${o}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){u(new Error(`Failed to import: ${e}`)),n(i)},onload(){t(self[l].moduleMap[o]),n(i)}});document.head.appendChild(i)})),self[l].moduleMap={}}}("/flip-text/assets/");e("data-v-2a1bb8f0");const v={class:"container"},c=o("h4",null,"Props",-1),b=d(" Text "),f=d(" Tile size "),x=d(" Width "),g=d(" Height "),y=d(" Max delay "),w=d(" Max depth (splits) "),U=d(" Split threshold "),$=d(" Flip duration "),M=d(" Show grid ");l();const D={expose:[],setup(e){const l=t("Hey Yo :)"),d=t(40),m=t(1),h=t(2e3),D=t(0),L=t(1e3),V=t(200),R=t(150),N=t(700),T=t(!1);return(e,t)=>{const _=a("flip-text");return n(),u(p,null,[o("div",v,[o(_,{msg:l.value,key:m.value,width:L.value,height:V.value,"tile-size":parseInt(d.value),"max-delay":h.value,"show-grid":T.value,"max-depth":D.value},null,8,["msg","width","height","tile-size","max-delay","show-grid","max-depth"])]),c,o("div",null,[o("label",null,[b,s(o("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e)},null,512),[[i,l.value]])]),o("label",null,[f,s(o("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e)},null,512),[[i,d.value]])]),o("label",null,[x,s(o("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>L.value=e)},null,512),[[i,L.value]])]),o("label",null,[g,s(o("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=e=>V.value=e)},null,512),[[i,V.value]])]),o("label",null,[y,s(o("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=e=>h.value=e)},null,512),[[i,h.value]])]),o("label",null,[w,s(o("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=e=>D.value=e)},null,512),[[i,D.value]])]),o("label",null,[U,s(o("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=e=>R.value=e)},null,512),[[i,R.value]])]),o("label",null,[$,s(o("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=e=>N.value=e)},null,512),[[i,N.value]])]),o("label",null,[M,s(o("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=e=>T.value=e)},null,512),[[r,T.value]])]),o("button",{onClick:t[10]||(t[10]=e=>m.value=Math.random())},"Run")])],64)}},__scopeId:"data-v-2a1bb8f0"};const L={expose:[],props:{msg:String,width:Number,height:Number,tileSize:Number,maxDelay:Number,showGrid:Boolean,maxDepth:Number,splitThreshold:Number,flipDuration:Number},setup(e){const{msg:l,width:a,height:s,tileSize:i,maxDelay:r,maxDepth:p,splitThreshold:d=150,flipDuration:h=700}=e,v=t(null),c=t(null),b=t(null),f=t(null),x=t([]),g=(e,l,t)=>(t.putImageData(e,0,0),l.toDataURL()),y=e=>{let l=0;for(let t=0;t<e.data.length;t++)l+=e.data[t];return 4*l/e.data.length},w=(e,l,t,a,n,u)=>{console.log(e,l,t,a,n,u);const o=[],s=document.createElement("canvas");s.width=n,s.height=n;const i=s.getContext("2d");var m=f.value;for(let v=l;v<a;v+=n)for(let l=e;l<t;l+=n){const e=m.getImageData(l,v,n,n),t=y(e);if(0===t);else if(t>d||u>=p){const t=document.createElement("img");t.style.top=`${v}px`,t.style.left=`${l}px`,t.style.width=`${n}px`,t.style.height=`${n}px`,t.style.transitionDuration=`${h}ms`,t.src=g(e,s,i),o.push(t),c.value.appendChild(t),setTimeout((()=>{t.classList.add("opening"),setTimeout((()=>{t.classList.add("open")}),h)}),Math.floor(Math.random()*r))}else o.value=w(l,v,l+n,v+n,n/2,u+1)}};return m((()=>{v.value.style.width=`${a}px`,v.value.style.height=`${s}px`,f.value=b.value.getContext("2d");var e=f.value;e.font=`900 ${2*s}px/${2*s}px Avenir, Helvetica, Arial, sans-serif`,e.textBaseline="top",e.fillText(l,0,0),x.value=w(0,0,Math.floor(2*a),Math.floor(2*s),i,0)})),(l,t)=>(n(),u("div",{id:"root",ref:v},[o("div",{id:"tiles",class:e.showGrid&&"showGrid",ref:c},null,2),o("canvas",{ref:b,id:"canvas",width:2*a,height:2*s},null,8,["width","height"])],512))}},V=h(D);V.component("flip-text",L),V.mount("#app");
